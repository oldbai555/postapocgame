/**
 * @Author: zjj
 * @Date: 2025/11/12
 * @Desc: C -> S
**/

syntax = "proto3";

package pb3;

option go_package = "server/internal/protocol";
import "base.proto";
import "player.proto";

enum C2SProtocol{
    C2SProtocolNil = 0;

    // 账号相关
    C2SRegister = 1;// 账号注册
    C2SLogin = 2;// 账号登录
    C2SVerify = 3;// 验证请求
    C2SQueryRoles = 4;// 查询角色列表
    C2SCreateRole = 5;// 创建角色
    C2SEnterGame = 6;// 进入游戏

    // 移动相关
    C2SStartMove = 20;// 开始移动
    C2SUpdateMove = 21;// 移动中更新
    C2SEndMove = 22;// 结束移动

    // 技能相关
    C2SUseSkill = 40;// 使用技能
}

message C2SRegisterReq {
    string username = 1;
    string password = 2;
}

message C2SLoginReq {
    string username = 1;
    string password = 2;
}

message C2SVerifyReq {}

message C2SQueryRolesReq {
    repeated PlayerSimpleData role_list = 1;
}

message C2SCreateRoleReq {
    PlayerSimpleData role_data = 1;
}

message C2SEnterGameReq {
    uint64 role_id = 1;
}

message C2SReconnectReq {
    string reconnect_key = 1;
}

message C2SUseSkillReq {
    uint32 skill_id = 1;
    uint64 target_hdl = 2;
    uint32 pos_x = 3; // 技能释放位置X坐标（像素坐标，服务端会转换为格子坐标）
    uint32 pos_y = 4; // 技能释放位置Y坐标（像素坐标，服务端会转换为格子坐标）
}

// 开始移动请求
message C2SStartMoveReq {
    uint32 from_x = 1; // 起点X坐标（像素坐标）
    uint32 from_y = 2; // 起点Y坐标（像素坐标）
    uint32 to_x = 3;   // 终点X坐标（像素坐标）
    uint32 to_y = 4;   // 终点Y坐标（像素坐标）
    uint32 speed = 5;  // 移动速度（像素/秒）
}

// 移动更新请求
message C2SUpdateMoveReq {
    uint32 pos_x = 1; // 当前位置X坐标（像素坐标）
    uint32 pos_y = 2; // 当前位置Y坐标（像素坐标）
    uint32 speed = 3; // 移动速度（像素/秒）
}

// 结束移动请求
message C2SEndMoveReq {
    uint32 pos_x = 1; // 终点X坐标（像素坐标）
    uint32 pos_y = 2; // 终点Y坐标（像素坐标）
}
